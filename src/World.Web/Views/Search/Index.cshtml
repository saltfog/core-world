@*
    For more information on enabling MVC for empty projects, visit http://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


<div class="form-horizontal">
    <div class="form-group">
        <label for="FindByCountry" class="col-sm-2 control-label">Search Country:</label>
        <div class="col-sm-3">
            <div class="input-group">
                <input type="text" id="FindByCountry" class="form-control col-md-4" autocomplete="off" placeholder="Lookup a country" autofocus="autofocus" />
                <span class="input-group-addon">
                    <span class="fa fa-search"></span>
                </span>
            </div>
        </div>
    </div>
</div>

<script>
    var searchCountry = function (query, process) {
        $('#FindByCountry').addClass('ui-autocomplete-loading');
        $.get('@(Url.Action("SearchCountry"))', { search: query }, function ( data ) {
            process(data);
            $('#FindByCountry').removeClass('ui-autocomplete-loading');
        })
    };

    function countrySelected() {
        var $input = $('#FindByCountry');
        var current = $input.typeahead("getActive");

    }

    $(function() {
        $('#FindByCountry').typeahead({
            source: function ( query, process ) {
                searchCountry( query, process );
            },
            autoSelect: true,
            afterSelect: countrySelected,
            minLength: 1
        });
    })
</script>
